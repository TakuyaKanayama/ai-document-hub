spring.application.name=ai-document-hub

# JPA / DataSource
spring.datasource.url=${SPRING_DATASOURCE_URL:-jdbc:postgresql://localhost:5432/aidoc}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:-postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:-password}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# Spring AI - OpenAI Compatible (for Gemini)
spring.ai.openai.api-key=${GEMINI_API_KEY}
spring.ai.openai.base-url=https://generativelanguage.googleapis.com/v1beta/openai
spring.ai.openai.chat.options.model=gemini-2.0-flash

# Spring AI Retry Configuration
spring.ai.retry.max-attempts=3
spring.ai.retry.backoff.initial-interval=2000
spring.ai.retry.backoff.multiplier=2
spring.ai.retry.backoff.max-interval=10000
spring.ai.retry.on-client-errors=true

# Disable OpenAI Embedding (use Transformers instead)
spring.ai.openai.embedding.enabled=false

# Debug Logging
logging.level.org.springframework.ai=DEBUG
logging.level.org.springframework.web.client.RestClient=DEBUG
logging.file.name=log/application.log

# Vector Store (PGVector)
spring.ai.vectorstore.pgvector.index-type=HNSW
spring.ai.vectorstore.pgvector.dimensions=384
spring.ai.vectorstore.pgvector.distance-type=COSINE_DISTANCE

# File Upload
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# Storage Location
app.storage.location=uploads

# Thymeleaf
spring.thymeleaf.cache=false

# Disable Spring Cloud Function (compatibility issue with Spring Boot 3.5.10)
spring.autoconfigure.exclude=org.springframework.cloud.function.context.config.ContextFunctionCatalogAutoConfiguration
